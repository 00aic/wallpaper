{"version":3,"file":"request.js","sources":["utils/request.ts"],"sourcesContent":["interface Data {\r\n\terrCode : number\r\n\terrMsg : string\r\n}\r\n\r\n\r\nconst baseURL = 'https://tea.qingnian8.com/api/bizhi';\r\n\r\nexport function request(config : UniApp.RequestOptions = { url: '' }) {\r\n\tlet { url, data = {}, header = {}, method = \"GET\" } = config\r\n\theader['access-key'] = \"abc123\"\r\n\turl = baseURL + url\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl,\r\n\t\t\tdata,\r\n\t\t\theader,\r\n\t\t\tmethod,\r\n\t\t\tsuccess: (res : UniApp.RequestSuccessCallbackResult) => {\r\n\t\t\t\tconst data = res.data as Data\r\n\t\t\t\tif (data.errCode === 0) {\r\n\t\t\t\t\tresolve(data)\r\n\t\t\t\t} else if (data.errCode === 400) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: \"错误提示\",\r\n\t\t\t\t\t\tcontent: data.errMsg,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\treject(data)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: data.errMsg,\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treject(data)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t})\r\n}"],"names":["uni","data"],"mappings":";;AAMA,MAAM,UAAU;AAET,SAAS,QAAQ,SAAiC,EAAE,KAAK,MAAM;AACjE,MAAA,EAAE,KAAK,OAAO,IAAI,SAAS,CAAA,GAAI,SAAS,MAAU,IAAA;AACtD,SAAO,YAAY,IAAI;AACvB,QAAM,UAAU;AAChB,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,kBAAAA,MAAI,QAAQ;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,CAAC,QAA8C;AACvD,cAAMC,QAAO,IAAI;AACbA,YAAAA,MAAK,YAAY,GAAG;AACvB,kBAAQA,KAAI;AAAA,QAAA,WACFA,MAAK,YAAY,KAAK;AAChCD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAASC,MAAK;AAAA,YACd,YAAY;AAAA,UAAA,CACZ;AACD,iBAAOA,KAAI;AAAA,QAAA,OAEP;AACJD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAOC,MAAK;AAAA,YACZ,MAAM;AAAA,UAAA,CACN;AACD,iBAAOA,KAAI;AAAA,QACZ;AAAA,MACD;AAAA,MACA,MAAM,CAAC,QAAQ;AACd,eAAO,GAAG;AAAA,MACX;AAAA,IAAA,CAEA;AAAA,EAAA,CACD;AACF;;"}