{"version":3,"file":"categorized-list.js","sources":["pages/categorized-list/categorized-list.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2F0ZWdvcml6ZWQtbGlzdC9jYXRlZ29yaXplZC1saXN0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"categorized\">\r\n\t\t<view class=\"loading-layout\" v-if=\"!classList.length && !noData\">\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"categorized-content\">\r\n\t\t\t<navigator :url=\"`/pages/preview/preview?id=${item._id}`\" v-for=\"item in classList\" :key=\"item._id\"\r\n\t\t\t\tclass=\"categorized-content__item\">\r\n\t\t\t\t<image class=\"categorized-content__item-image\" :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"loading-layout\" v-if=\"classList.length || noData\">\r\n\t\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"safe-area-inset-bottom\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tapiGetClassList,\r\n\t\tapiGetHistoryList\r\n\t} from '@/api/api'\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonReachBottom,\r\n\t\tonShareAppMessage,\r\n\t\tonShareTimeline,\r\n\t\tonUnload\r\n\t} from '@dcloudio/uni-app'\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\t//分类列表数据\r\n\tconst classList = ref([]);\r\n\tconst noData = ref(false)\r\n\r\n\t//定义data参数\r\n\tconst queryParams = {\r\n\t\tpageNum: 1,\r\n\t\tpageSize: 12\r\n\t}\r\n\tconst pageName = ref('')\r\n\r\n\t//获取分类列表网络数据\r\n\tconst getClassList = async () => {\r\n\t\tlet res;\r\n\t\tif (queryParams.classid) res = await apiGetClassList(queryParams);\r\n\t\tif (queryParams.type) res = await apiGetHistoryList(queryParams);\r\n\r\n\t\tclassList.value = [...classList.value, ...res.data];\r\n\t\tif (queryParams.pageSize > res.data.length) noData.value = true;\r\n\t\tuni.setStorageSync(\"storgClassList\", classList.value);\r\n\t}\r\n\r\n\tonLoad((e) => {\r\n\t\tconst {\r\n\t\t\tid,\r\n\t\t\tname,\r\n\t\t\ttype\r\n\t\t} = e;\r\n\t\tif (type) {\r\n\t\t\tqueryParams.type = type\r\n\t\t}\r\n\t\tif (id) {\r\n\t\t\tqueryParams.classid = id\r\n\t\t}\r\n\t\tpageName.value = name\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: name\r\n\t\t})\r\n\t\t//执行获取分类列表方法\r\n\t\tgetClassList();\r\n\t})\r\n\tonUnload(() => {\r\n\r\n\t\tuni.removeStorageSync(\"storgClassList\")\r\n\t})\r\n\tonReachBottom(() => {\r\n\t\tif (noData.value) return;\r\n\t\tqueryParams.pageNum++;\r\n\t\tgetClassList();\r\n\t})\r\n\r\n\t// 分享给好友\r\n\tonShareAppMessage((e) => {\r\n\t\treturn {\r\n\t\t\ttitle: \"咸虾米壁纸-\" + pageName.value,\r\n\t\t\tpath: `/pages/categorized-list/categorized-list?id=${queryParams.classid}&name=${pageName.value}`\r\n\t\t}\r\n\t})\r\n\t//分享朋友圈\r\n\tonShareTimeline(() => {\r\n\t\treturn {\r\n\t\t\ttitle: \"咸虾米壁纸-\" + pageName.value,\r\n\t\t}\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.categorized {\r\n\t\t&-content {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\tgap: 10rpx;\r\n\t\t\tpadding: 30rpx;\r\n\r\n\t\t\t&__item {\r\n\t\t\t\taspect-ratio: 4 / 10;\r\n\r\n\t\t\t\t&-image {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tobject-fit: cover;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n</style>","import MiniProgramPage from 'F:/Development/code/uni-app/wallpaper/pages/categorized-list/categorized-list.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","apiGetClassList","apiGetHistoryList","uni","onLoad","onUnload","onReachBottom","onShareAppMessage","onShareTimeline"],"mappings":";;;;;;;;;;;;;;AAmBA,UAAA,YAAAA,kBAAA,CAAA,CAAA;AAgBA,UAAA,SAAAA,cAAA,IAAA,KAAA;AAGA,UAAA,cAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,IACA;AACA,UAAA,WAAAA,cAAA,IAAA,EAAA;AAGA,UAAA,eAAA,YAAA;AACA,UAAA;AACA,UAAA,YAAA;AAAA,cAAA,MAAAC,QAAA,gBAAA,WAAA;AACA,UAAA,YAAA;AAAA,cAAA,MAAAC,QAAA,kBAAA,WAAA;AAEA,gBAAA,QAAA,CAAA,GAAA,UAAA,OAAA,GAAA,IAAA,IAAA;AACA,UAAA,YAAA,WAAA,IAAA,KAAA;AAAA,eAAA,QAAA;AACAC,oBAAAA,MAAA,eAAA,kBAAA,UAAA,KAAA;AAAA,IACA;AAEAC,kBAAA,OAAA,CAAA,MAAA;AACA,YAAA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACA,IAAA;AACA,UAAA,MAAA;AACA,oBAAA,OAAA;AAAA,MACA;AACA,UAAA,IAAA;AACA,oBAAA,UAAA;AAAA,MACA;AACA,eAAA,QAAA;AACAD,oBAAAA,MAAA,sBAAA;AAAA,QACA,OAAA;AAAA,MACA,CAAA;AAEA;IACA,CAAA;AACAE,kBAAAA,SAAA,MAAA;AAEAF,oBAAA,MAAA,kBAAA,gBAAA;AAAA,IACA,CAAA;AACAG,kBAAAA,cAAA,MAAA;AACA,UAAA,OAAA;AAAA;AACA,kBAAA;AACA;IACA,CAAA;AAGAC,kBAAA,kBAAA,CAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA,WAAA,SAAA;AAAA,QACA,MAAA,+CAAA,YAAA,OAAA,SAAA,SAAA,KAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAAA,gBAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA,WAAA,SAAA;AAAA,MACA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FA,GAAG,WAAW,eAAe;"}